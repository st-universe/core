{% macro shipyardoptions(station, availableBuildplans) %}
<table class="tcal">
  <tr>
    <th></th>
    <th>Anzahl Schiffe</th>
    <th>Bauzeit</th>
    <th></th>
  </tr>
  {% for data in availableBuildplans %}
  <tr class="row" style="cursor: pointer;" title="Details">
    <td class="selectable" onclick="toggleTableRowVisible('buildplan_{{ data.getId }}');">{{ data.getName }}</td>
    <td class="selectable" onclick="toggleTableRowVisible('buildplan_{{ data.getId }}');">{{ data.getShipCount }}</td>
    <td onclick="toggleTableRowVisible('buildplan_{{ data.getId }}');">{{ data.getBuildtime|formatSeconds }}</td>
    <td style="text-align: center;">
      <a class="linkbutton"
        href="station.php?id={{ station.getId }}&B_BUILD_SHIPYARD_SHIP=1&planid={{ data.getId }}">Schiff
        bauen</a>
    </td>
  </tr>
  <tr title="Details schließen" onclick="toggleTableRowVisible('buildplan_{{ data.getId }}');"
    id="buildplan_{{ data.getId }}" style="cursor: pointer; display: none;" class="row">
    <td colspan="4">
      <table style="width: 100%">
        <tr>
          <td>Rumpf</td>
          <td>
            <div style="display: table-cell;">
              <img src="assets/ships/{{ data.getRump.getId }}.png" />
            </div>
            <span style="display: table-cell; vertical-align: middle;">{{ data.getRump.getName }}</span>
          </td>
        </tr>
        <tr>
          <td>Module</td>
          <td>
            {% for module in data.getModules %}
            <img src="assets/commodities/{{ module.getModule.getCommodityId }}.png"
              name="{{ module.getModule.getName }}" />
            {% endfor %}
          </td>
        </tr>
        <tr>
          <td>Crewbedarf</td>
          <td>{{ data.getCrew }}</td>
        </tr>
      </table>
    </td>
  </tr>
  {% endfor %}
</table>
{% endmacro %}

{% macro ship_repairprogress(station, shipRepairProgress, sessionString) %}
{% if shipRepairProgress %}
<table class="tcal">
  <tr>
    <th colspan="5">Schiffe in Reparatur</th>
  </tr>
  {% for wrapper in shipRepairProgress %}
  {% set ship = wrapper.get %}
  {% set shipId = ship.getId %}
  <tr style="height: 50px" class="row">
    <td style="text-align: center; vertical-align: middle;">
      <img src="assets/ships/{{ ship.getRump.getId }}.png" title="{{ ship.getRump.getName }}" />
    </td>
    <td style="text-align: center; vertical-align: middle">
      {{ ship.getName|bbcode }}
    </td>
    <td style="text-align: center; vertical-align: middle">
      <img src="assets/buttons/modul_1.png" title="Hülle" style="width: 12px; height: 12px;" />
      {{ ship.getHull }}/{{ ship.getMaxHull }}
    </td>
    <td style="text-align: center; vertical-align: middle">
      {% for sys in wrapper.getDamagedSystems %}
      <img title="{{ sys.getName }}: {{ sys.getStatus }}%" style="margin-right: 5px;" class="{{ sys.getCssClass }}"
        src="assets/system/{{ sys.getSystemType }}.png" />
      {% endfor %}
    </td>
    <td>
      <a href="station.php?id={{ station.getId }}&B_CANCEL_REPAIR=1&shipid={{ shipId }}&sstr={{ sessionString }}"
        onmouseover="cp('cancel{{ shipId }}','buttons/x2');" onmouseout="cp('cancel{{ shipId }}','buttons/x1');">
        <span>{{ wrapper.getRepairDuration }}</span> Ticks
        <img src="assets/buttons/x1.png" name="cancel{{ shipId }}" title="Reparatur abbrechen" />
      </a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endif %}
{% endmacro %}
