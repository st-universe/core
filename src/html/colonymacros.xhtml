<html xmlns:stu="stu">
<metal:macro metal:define-macro="colonyimage_base">
  <div tal:condition="colony/getColonyClass/hasRing" class="planet_ring"
    style="background-image: url(assets/planets/${colony/getColonyClass/getId}.png)">
    <img src="assets/planets/${colony/getColonyClass/getId}r.png" />
  </div>
  <img src="assets/planets/${colony/getColonyClass/getId}.png" tal:condition="not:colony/getColonyClass/hasRing" />
</metal:macro>
<metal:macro metal:define-macro="hiddencolonyid" phptal:cache="1m per COLONY/getId">
  <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
</metal:macro>
<metal:block metal:define-macro="initial_js">
  <script>
    var sstr = '${THIS/getSessionString}';
    var colonyid = ${COLONY/getId};
    var colonyMapX = ${COLONY/getSystem/getCx};
    var colonyMapY = ${COLONY/getSystem/getCy};
    var scrollOffset = 6;
  </script>
  <script src="${THIS/getJavascriptPath}/js/colony.js"></script>
  <script src="${THIS/getJavascriptPath}/js/shipmanagement.js"></script>
  <script src="${THIS/getJavascriptPath}/js/starmap.js"></script>
</metal:block>
<metal:block metal:define-macro="initial_js_light">
  <script>
    var sstr = '${THIS/getSessionString}';
  </script>
  <script src="${THIS/getJavascriptPath}/js/colony.js"></script>
  <script src="${THIS/getJavascriptPath}/js/shipmanagement.js"></script>
</metal:block>
<metal:block metal:define-macro="buildmenu">
  <input type="hidden" name="buildmenu${menutype}_offset" id="buildmenu${menutype}_offset"
    tal:attributes="value scrolloffset" />
  <div tal:content="BUILD_MENU/${menutype}/getName">MENUNAME</div>
  <div class="arrow" onclick="buildMenuScrollUp(${menutype},${scrolloffset})" title="Hochblättern">
    <table style="width:100%; height: 100%;">
      <tr>
        <td style="text-align: center;">
          <img src="assets/buttons/pup.png" />
        </td>
      </tr>
    </table>
  </div>
  <ul class="menu" style="width: 11.1vw;">
    <li tal:repeat="building menu/buildings">
      <div onclick="openBuildingInfo(${building/getId})">
        <img src="assets/generated/buildings/${building/getId}/${building/getBuildingType}at.png" /><br />
        <span tal:replace="building/getName">runtime</span>
      </div>
    </li>
  </ul>
  <div class="arrow" onclick="buildMenuScrollDown(${menutype},${scrolloffset})" title="Runterblättern">
    <table style="width:100%; height: 100%;">
      <tr>
        <td style="text-align: center;">
          <img src="assets/buttons/pdown.png" />
        </td>
      </tr>
    </table>
  </div>
</metal:block>
<metal:block metal:define-macro="cm_buildmenu">
  <input type="hidden" name="colmenu" value="cm_buildmenu" />
  <metal:macro metal:use-macro="cm_tabs" />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <table cellpading="0" cellspacing="0" style="text-align: center;">
        <tr>
          <td tal:repeat="menu BUILD_MENUS" class="buildmenu">
            <div id="buildmenu${repeat/menu/key}">
              <metal:macro metal:use-macro="html/colonymacros.xhtml/buildmenu"
                tal:define="menutype repeat/menu/key;scrolloffset string:0" />
            </div>
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_social">
  <input type="hidden" name="colmenu" value="cm_social" />
  <metal:macro metal:use-macro="cm_tabs" />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <table class="tcal" style="width: 40vw;">
        <tr>
          <th colspan="4">Crewberechnung dieser Kolonie</th>
        </tr>
        <tr>
          <td style="width: 25%" class="darkbg"><span
              tal:replace="COLONY_SURFACE/getPopulation/getPositiveEffectPrimaryDescription">PRIMARY</span></td>
          <td style="width: 25%" class="darkbg"><span
              tal:replace="COLONY_SURFACE/getPopulation/getPositiveEffectSecondaryDescription">PRIMARY</span></td>
        </tr>
        <tr>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="COLONY_SURFACE/getPopulation/getPositiveEffectPrimary">VALUE</span>
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="COLONY_SURFACE/getPopulation/getPositiveEffectSecondary">VALUE</span>
          </td>
        </tr>
        <tr>
          <td style="width: 25%" class="darkbg"><span
              tal:replace="COLONY_SURFACE/getPopulation/getNegativeEffectDescription">PRIMARY</span></td>
          <td style="width: 25%" class="darkbg">Lebensstandard</td>
        </tr>
        <tr>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="COLONY_SURFACE/getPopulation/getNegativeEffect">VALUE</span>
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Prozent" />
            <span tal:replace="COLONY_SURFACE/getPopulation/getLifeStandardPercentage">VALUE</span>%
          </td>
        </tr>
        <tr>
          <td colspan="2" style="width: 25%" class="darkbg">Erzeugte Crew</td>
        </tr>
        <tr>
          <td colspan="2">
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="COLONY_SURFACE/getPopulation/getCrewLimit">VALUE</span>
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal" style="width: 40vw;">
        <tr>
          <th colspan="5">Globale Crewübersicht</th>
        </tr>
        <tr>
          <td style="width: 20%" class="darkbg">globales Crewlimit</td>
          <td style="width: 20%" class="darkbg">Crew auf Schiffen</td>
          <td style="width: 20%" class="darkbg">Verfügbare Crew auf Kolonie</td>
        </tr>
        <tr>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="GLOBAL_CREW_LIMIT">LIMIT</span>
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="CREW_COUNT_SHIPS">USED</span>
            (<a href="javascript:void(0);" onclick="showPodLocationWindow();"><span
                tal:content="CREW_COUNT_DEBRIS_AND_TRADE_POSTS" title="Verschollene Crew">DEBRIS</span></a>)
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="COLONY/getCrewAssignmentAmount">FREE</span>
          </td>
        </tr>
        <tr>
          <td style="width: 20%" class="darkbg">Crew in Ausbildung</td>
          <td colspan="2" style="width: 20%" class="darkbg">Noch Ausbildbar</td>
        </tr>
        <tr>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="CREW_COUNT_TRAINING">FREE</span>
          </td>
          <td colspan="2">
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            <span tal:replace="CREW_COUNT_REMAINING">SLOTS</span>
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:macro metal:define-macro="cm_academy">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <table class="tcal">
        <tr>
          <td style="width: 50%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 50%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/12}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(12);">
              <span>Akademie</span>
            </a>
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal">
        <tr>
          <th colspan="4">Crewausbildung</th>
        </tr>
        <tr>
          <td style="width: 25%" class="darkbg">Freie Bevölkerung</td>
          <td style="width: 25%" class="darkbg">Gleichzeitig Ausbildbar</td>
          <td style="width: 25%" class="darkbg">In Ausbildung</td>
          <td style="width: 25%" class="darkbg">Noch Ausbildbar</td>
        </tr>
        <tr>
          <td>
            <img src="assets/bev/bev_unused_5_${THIS/getUser/getFactionId}.png" title="Freie Bevölkerung" />
            <span tal:replace="COLONY/getWorkless" />
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Freie Bevölkerung" />
            <span tal:replace="CREW_COUNT_TRAINABLE" />
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Freie Bevölkerung" />
            <span tal:replace="CREW_COUNT_TRAINING" />
          </td>
          <td>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Freie Bevölkerung" />
            <span tal:replace="CREW_COUNT_REMAINING" />
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal">
        <tr>
          <th>Ausbildung</th>
        </tr>
        <tr>
          <td>
            <input type="text" name="crewcount" size="2" /> / <span tal:replace="TRAINABLE_CREW_COUNT_PER_TICK" />
            <span>Crew</span>
            <input type="submit" style="cursor: pointer;" name="B_TRAIN_CREW" value="Ausbilden" />
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:macro>
<metal:macro metal:define-macro="cm_fighter_shipyard">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <table class="tcal">
        <tr>
          <td style="width: 50%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 50%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/10}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(10);">
              <span>Hangar</span>
            </a>
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal">
        <tr>
          <th colspan="3">Jäger bauen</th>
        </tr>
        <tr tal:repeat="data BUILDABLE_SHIPS" tal:attributes="class string:row${repeat/data/odd}">
          <td>
            <input type="radio" name="buildrump" value="" tal:attributes="value data/getId" />
            <img src="assets/ships/${data/getId}.png" />
          </td>
          <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
          <td>
            <div style="display: inline-block; width: 55px;">
              <div style="display: inline-block; vertical-align: middle;"><img src="assets/buttons/e_trans2.png"
                  title="Energie" /></div>
              ${data/getEpsCost}
            </div>
            <div style="display: inline-block; width: 55px;" tal:repeat="cost data/getBuildingCosts">
              <div style="display: inline-block; vertical-align: middle;"><img
                  src="assets/commodities/${cost/getCommodityId}.png"
                  tal:attributes="title cost/getCommodity/getName" />
              </div>
              ${cost/getAmount}
            </div>
          </td>
        </tr>
        <tr tal:condition="not:BUILDABLE_SHIPS">
          <td colspan="3" style="text-align: center;">Keine baubaren Rümpfe vorhanden</td>
        </tr>
      </table>
      <div tal:condition="BUILDABLE_SHIPS" style="width: 100%; text-align: center">
        <br />
        <input type="submit" style="cursor: pointer;" id="buildfightershipbutton" name="B_BUILD_FIGHTER_SHIPYARD_RUMP"
          value="Schiff bauen" />
      </div>
    </div>
  </metal:macro>
</metal:macro>
<metal:macro metal:define-macro="cm_torpedo_fab">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <table class="tcal">
        <tr>
          <td style="width: 50%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 50%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/11}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(11);">
              <span>Torpedoherstellung</span>
            </a>
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal">
        <tr>
          <th colspan="2">Herstellung</th>
        </tr>
        <tr tal:condition="not:BUILDABLE_TORPEDO_TYPES">
          <td colspan="2">Es können keine Torpedos gebaut werden</td>
        </tr>
        <tr tal:condition="BUILDABLE_TORPEDO_TYPES">
          <td class="darkbg">Typ</td>
          <td class="darkbg">Kosten</td>
        </tr>
        <tr tal:repeat="data BUILDABLE_TORPEDO_TYPES" tal:attributes="class string:row${repeat/data/odd}">
          <td>
            <input type="text" size="3" name="torp[${data/getId}]"
              onkeydown="event.key == 'Enter' && $('producebutton').click()" /> x <span
              tal:replace="data/getProductionAmount">AMOUNT</span>
            <img src="assets/commodities/${data/getCommodityId}.png" class="center" />
            <span tal:replace="data/getName">TORPEDOTYPE</span>
          </td>
          <td>
            <img src="assets/buttons/e_trans2.png" class="center" title="Energiekosten" />
            <span tal:replace="data/getEnergyCost">ECOST</span>
            <tal:block tal:repeat="cost data/getProductionCosts">
              <img src="assets/commodities/${cost/getCommodityId}.png" class="center"
                tal:attributes="title cost/getCommodity/getName" />
              <span tal:replace="cost/getAmount">COUNT</span>
            </tal:block>
          </td>
        </tr>
      </table>
      <div tal:condition="BUILDABLE_TORPEDO_TYPES" style="width: 100%; text-align: center">
        <br />
        <input type="submit" style="cursor: pointer;" name="B_BUILD_TORPEDOS" id="producebutton"
          value="Torpedos herstellen" />
      </div>
    </div>
  </metal:macro>
</metal:macro>
<metal:macro metal:define-macro="cm_airfield">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <table class="tcal">
        <tr>
          <td style="width: 50%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 50%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/6}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(6);">
              <span>Hangar</span>
            </a>
          </td>
        </tr>
      </table>
      <br />
      <table class="tcal">
        <tr>
          <th colspan="3">Schiff starten</th>
        </tr>
        <tr tal:repeat="data STARTABLE_SHIPS">
          <td>
            <input type="radio" name="startrump" value="" tal:attributes="value data/getId" />
            <img src="assets/ships/${data/getId}.png" />
          </td>
          <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
          <td>
            <div style="display: inline-block; width: 120px;" tal:repeat="hangar data/getStartHangar">
              <div style="display: inline-block; vertical-align: middle;"><img src="assets/buttons/e_trans2.png"
                  title="Benötigte Startenergie" />
              </div>
              ${hangar/getStartEnergyCosts}
              <div style="display: inline-block; vertical-align: middle;"><img src="assets/buttons/crew.png"
                  title="Benötigte Startcrew" />
              </div>
              ${hangar/getBuildplan/getCrew}
            </div>
          </td>
        </tr>
        <tr tal:condition="not:STARTABLE_SHIPS">
          <td colspan="2" style="text-align: center;">Keine startbaren Schiffe vorhanden</td>
        </tr>
      </table>
      <div tal:condition="STARTABLE_SHIPS" style="width: 100%; text-align: center">
        <br />
        <input type="submit" style="cursor: pointer;" name="B_START_AIRFIELD_SHIP" value="Schiff starten" />
      </div>
      <br />
      <table class="tcal">
        <tr>
          <th colspan="3">Schiff bauen</th>
        </tr>
        <tr tal:repeat="data BUILDABLE_SHIPS" tal:attributes="class string:row${repeat/data/odd}">
          <td>
            <input type="radio" name="buildrump" value="" tal:attributes="value data/getId" />
            <img src="assets/ships/${data/getId}.png" />
          </td>
          <td tal:content="data/getName" style="vertical-align: middle;">NAME</td>
          <td>
            <div style="display: inline-block; width: 50px;">
              <div style="display: inline-block; vertical-align: middle;"><img src="assets/buttons/e_trans2.png"
                  title="Energie" /></div>
              ${data/getEpsCost}
            </div>
            <div style="display: inline-block; width: 65px;" tal:repeat="cost data/getBuildingCosts">
              <div style="display: inline-block; vertical-align: middle;"><img
                  src="assets/commodities/${cost/getCommodityId}.png"
                  tal:attributes="title cost/getCommodity/getName" />
              </div>
              ${cost/getAmount}
            </div>
          </td>
        </tr>
        <tr tal:condition="not:BUILDABLE_SHIPS">
          <td colspan="3" style="text-align: center;">Keine baubaren Rümpfe vorhanden</td>
        </tr>
      </table>
      <div tal:condition="BUILDABLE_SHIPS" style="width: 100%; text-align: center">
        <br />
        <input type="text" size="3" name="amount" value="1"
          onkeydown="event.key == 'Enter' && $('buildairfieldshipbutton').click();" />
        <input type="submit" style="cursor: pointer;" id="buildairfieldshipbutton" name="B_BUILD_AIRFIELD_RUMP"
          value="Schiff(e) bauen" />
      </div>
    </div>
  </metal:macro>
</metal:macro>
<metal:block metal:define-macro="cm_building_mgmt">
  <metal:macro metal:use-macro="cm_tabs" />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="colmenu" value="cm_building_mgmt" />
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <div style="float: left; width: 20vw; font-size: 1vw;">
        <div class="divhead">Gebäudewahl</div>
        <div class="divbody">
          <select style="width: 100%; height: 370px;" multiple="multiple" name="selection[]">
            <tal:block tal:repeat="data BUILDING_LIST">
              <tal:block tal:condition="data/isActivateable">
                <option style="padding-top: 2px; padding-left: 2px;" tal:attributes="value data/getFieldId"
                  tal:condition="data/isActive" tal:content="string:${data/getBuilding/getName} (an)">NAME</option>
                <option style="padding-top: 2px; padding-left: 2px;" tal:attributes="value data/getFieldId"
                  tal:condition="not:data/isActive" tal:content="string:${data/getBuilding/getName} (aus)">NAME</option>
              </tal:block>
            </tal:block>
          </select>
          <input type="hidden" name="mode" value="2" />
          <div style="margin-top: 10px; width: 50%; float: left;">
            <input type="submit" value="Aktivieren" name="B_MULTIPLE_ACTIVATION" />
          </div>
          <div style="margin-top: 10px; text-align: right; width: 50%; float: left;">
            <input type="submit" value="Deaktivieren" name="B_MULTIPLE_DEACTIVATION" />
          </div>
          <br style="clear: both;" />
        </div>
      </div>
      <div style="margin-left: 5px; float: left; width: 14vw;">
        <div class="divhead">Gebäudegruppen</div>
        <div class="divbody">
          <img src="assets/buttons/e_trans2.png" title="Energie" style="width: 10px; height: 10px;" />
          <strong>Energie</strong><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_ACTIVATION=1&mode=1&sstr=${THIS/getSessionString}">Verbraucher
            aktivieren</a><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_DEACTIVATION=1&mode=1&sstr=${THIS/getSessionString}">Verbraucher
            deaktivieren</a><br /><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_ACTIVATION=1&mode=3&sstr=${THIS/getSessionString}">Produzenten
            aktivieren</a><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_DEACTIVATION=1&mode=3&sstr=${THIS/getSessionString}">Produzenten
            deaktivieren</a><br /><br />
          <img src="assets/buttons/lager.png" title="Warenbezogen" style="width: 10px; height: 10px;" />
          <strong>Warenbezogen</strong><br />
          Ware wählen:<br />
          <select name="commodity" style="height: 17px;" id="commodityselector">
            <option class="commodity_select_option" tal:repeat="data USEABLE_COMMODITY_LIST"
              tal:attributes="value data/getId" tal:content="data/getName"
              style=" background-image: url(assets/commodities/${data/getId}.png);">NAME</option>
          </select><br /><br />
          <table class="tcal">
            <tr>
              <td style="text-align: center;" class="darkbg">Produzenten</td>
              <td style="text-align: center;" class="darkbg">Verbraucher</td>
            </tr>
            <tr>
              <td style="text-align: center;">
                <input type="button" value="aktivieren"
                  onclick="snafu(${COLONY/getId},'B_MULTIPLE_ACTIVATION', 7, '${THIS/getSessionString}')" /><br /><br />
                <input type="button" value="deaktivieren"
                  onclick="snafu(${COLONY/getId},'B_MULTIPLE_DEACTIVATION', 7, '${THIS/getSessionString}')" />

              </td>
              <td style="text-align: center;">
                <input type="button" value="aktivieren"
                  onclick="snafu(${COLONY/getId},'B_MULTIPLE_ACTIVATION', 6, '${THIS/getSessionString}')" /><br /><br />
                <input type="button" value="deaktivieren"
                  onclick="snafu(${COLONY/getId},'B_MULTIPLE_DEACTIVATION', 6, '${THIS/getSessionString}')" />
              </td>
            </tr>
          </table>
          <br />
          <img src="assets/buttons/lager.png" title="Bevölkerungsbezogen" style="width: 10px; height: 10px;" />
          <strong>Bevölkerungsbezogen</strong><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_ACTIVATION=1&mode=5&sstr=${THIS/getSessionString}">Wohngebäude
            aktivieren</a><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_DEACTIVATION=1&mode=5&sstr=${THIS/getSessionString}">Wohngebäude
            deaktivieren</a><br /><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_ACTIVATION=1&mode=4&sstr=${THIS/getSessionString}">Arbeitgeber
            aktivieren</a><br />
          <span style="color: rgb(206, 206, 206);">&gt;</span> <a
            href="?id=${COLONY/getId}&B_MULTIPLE_DEACTIVATION=1&mode=4&sstr=${THIS/getSessionString}">Arbeitgeber
            deaktivieren</a><br /><br />
        </div>
      </div>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_management">
  <metal:macro metal:use-macro="cm_tabs" />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment" style="width: 40vw;">
      <input type="hidden" name="id" value="runtime" tal:attributes="value COLONY/getId" />
      <div class="box">
        <div class="box_title">Schiffe im Orbit</div>
        <div class="box_body">
          <ul id="shipselector">
            <metal:block tal:condition="FIRST_ORBIT_SHIP" metal:use-macro="shipselector"
              tal:define="wrapper FIRST_ORBIT_SHIP" />
            <li tal:condition="not:FIRST_ORBIT_SHIP" style="text-align: center">Keine Schiffe im Orbit</li>
          </ul>
          <div style="width: 100%;" tal:condition="FIRST_ORBIT_SHIP">
            <br />
            <a href="javascript:void(0);" onclick="showBFromWindow();" onmouseover="cp('beamfrom','buttons/b_down2')"
              onmouseout="cp('beamfrom','buttons/b_down1')"><img src="assets/buttons/b_down1.png" name="beamfrom"
                title="Von Schiff beamen" /></a>
            <a href="javascript:void(0);" onclick="showBToWindow();" onmouseover="cp('beamto','buttons/b_up2')"
              onmouseout="cp('beamto','buttons/b_up1')"><img src="assets/buttons/b_up1.png" name="beamto"
                title="Zu Schiff beamen" /></a>
            <a href="javascript:void(0);" onclick="getOrbitShipList();">Liste</a> | <a
              href="?SHOW_ORBITAL_SHIPS=1&id=${COLONY/getId}">Management</a>
          </div>
        </div>
      </div>
      <br />
      <div class="colonyInfoContainer">
        <div class="box">
          <div class="box_title">Planet</div>
          <div class="box_body">
            <div>
              <img src="/assets/planets/${COLONY/getColonyClassId}.png" style="width: 30px; height: 30px;" />
              <span tal:replace="COLONY/getPlanetName" />(${COLONY/getSX}|${COLONY/getSY})
            </div>
            <div>
              <img src="assets/buttons/t_${COLONY/getDayTimePrefix}.png" tal:attributes="title COLONY/getDayTimeName" />
              <span>${COLONY/getColonyTimeHour}:${COLONY/getColonyTimeMinute} Uhr</span>
              <img src="assets/buttons/classm.png" title="Eigenrotationsdauer" alt="Eigenrotationsdauer" />
              <span tal:content="formatSeconds:COLONY/getRotationTime"> ROTATIONTIME</span>
            </div>
          </div>
        </div>
        <div class="box" tal:condition="exists:STARSYSTEM_ENTRY_TAL">
          <div class="box_title">Sternensystem</div>
          <div class="box_body">
            <tal:block tal:condition="STARSYSTEM_ENTRY_TAL/wasDiscovered">
              <a href="database.php?SHOW_ENTRY=1&cat=7&ent=${STARSYSTEM_ENTRY_TAL/getId}"
                title="Karte des Systems öffnen">
                <img src="assets/map/systemtypes/${COLONY/getSystem/getSystemType/getId}.png"
                  title="${COLONY/getSystem/getSystemType/getDescription}" />
                <span>${COLONY/getSystem/getName} (${COLONY/getSystem/getCx}|${COLONY/getSystem/getCy})</span>
              </a>
            </tal:block>
            <tal:block tal:condition="not:STARSYSTEM_ENTRY_TAL/wasDiscovered">
              <img src="assets/map/systemtypes/${COLONY/getSystem/getSystemType/getId}.png"
                title="${COLONY/getSystem/getSystemType/getDescription}" />
              <span>${COLONY/getSystem/getName} (${COLONY/getSystem/getCx}|${COLONY/getSystem/getCy})</span>
            </tal:block>
            <div>
              Typ: <span tal:replace="COLONY/getSystem/getSystemType/getDescription">TYPE</span>
            </div>
          </div>
        </div>
      </div>
      <tal:block tal:define="DEPOSIT_MININGS COLONY_SURFACE/getUserDepositMinings">
        <tal:block tal:condition="DEPOSIT_MININGS">
          <div class="box">
            <div class="box_title">Geschürfte Ressourcen</div>
            <div class="box_body">
              <table class="tcal">
                <tr>
                  <th colspan="2">Ressource</th>
                  <th>verbleibend</th>
                  <th></th>
                </tr>
                <tr tal:repeat="deposit_item DEPOSIT_MININGS">
                  <td><img src="assets/commodities/${deposit_item/deposit/getCommodity/getId}.png"
                      tal:attributes="title deposit_item/deposit/getCommodity/getName" /></td>
                  <td>${deposit_item/deposit/getCommodity/getName}</td>
                  <td>${deposit_item/deposit/getAmountLeft}</td>
                  <td>${deposit_item/currentlyMined}</td>
                </tr>
              </table>
            </div>
          </div>
          <br />
        </tal:block>
      </tal:block>
      <div class="box" tal:condition="php:SHIELDING_MANAGER.hasShielding() OR BUILDABLE_TORPEDO_TYPES">
        <div class="box_title">Schilde + Orbitalverteidigung</div>
        <div class="box_body">
          <table class="tcal">
            <tal:block tal:condition="SHIELDING_MANAGER/hasShielding">
              <tr>
                <td>Schildstärke: <input type="text" size="4" name="load" id="loadshield_value"
                    onkeydown="event.key == 'Enter' &&  $('loadshield_button').click()" />
                  <input type="submit" class="button" value="laden" name="B_LOAD_SHIELDS" id="loadshield_button" />
                  <input type="button" class="button" value="max"
                    onclick="$('loadshield_value').value = '${SHIELDING_MANAGER/getMaxShielding}'; $('loadshield_button').click()" />
                </td>
                <td>
                  <a tal:condition="not:SHIELDING_MANAGER/isShieldingEnabled"
                    href="?B_ACTIVATE_SHIELDS=1&id=${COLONY/getId}&sstr=${THIS/getSessionString}"
                    onmouseover="cp('shields','buttons/shldac1')" onmouseout="cp('shields','buttons/shldac2')">
                    <img src="/assets/buttons/shldac2.png" name="shields" /> Aktivieren
                  </a>

                  <a href="?B_DEACTIVATE_SHIELDS=1&id=${COLONY/getId}&sstr=${THIS/getSessionString}"
                    tal:condition="SHIELDING_MANAGER/isShieldingEnabled" onmouseover="cp('shields','buttons/shldac2')"
                    onmouseout="cp('shields','buttons/shldac1')">
                    <img src="/assets/buttons/shldac1.png" name="shields" /> Deaktivieren
                  </a>
                </td>
              </tr>
              <tr>
                <td>Schildfrequenz in MHz (max. 6 Stellen):</td>
                <td>
                  <input type="text" size="5" name="frequency" tal:attributes="value COLONY/getShieldFrequency"
                    onkeydown="event.key == 'Enter' &&  $('changeFrequencyButton').click()" />
                  <input type="submit" class="button" name="B_CHANGE_FREQUENCY" value="ändern"
                    id="changeFrequencyButton" />
                </td>
              </tr>
            </tal:block>
            <tr tal:condition="BUILDABLE_TORPEDO_TYPES">
              <td>Torpedo-Sorte für Orbitalverteidigung</td>
              <td>
                <select name="torpid">
                  <option value="0">----------------------</option>
                  <tal:block tal:repeat="data BUILDABLE_TORPEDO_TYPES">
                    <option tal:content="data/getName"
                      tal:attributes="value data/getId; selected php:COLONY.getTorpedo() AND (COLONY.getTorpedo().getId() EQ data.getId())">
                      NAME</option>
                  </tal:block>
                </select>
                <input type="submit" class="button" value="ändern" name="B_CHANGE_TORPS" id="changetorps_button" />
              </td>
            </tr>
          </table>
        </div>
      </div>
      <br />
      <table class="tcal population">
        <tr>
          <th colspan="5">Bevölkerung</th>
        </tr>
        <tr>
          <td class="populationValue">
            <div>Gesamt</div>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Bevölkerung" />
            ${COLONY/getPopulation}
          </td>
          <td class="populationValue">
            <div>Arbeiter</div>
            <img src="assets/bev/bev_used_5_${THIS/getUser/getFactionId}.png" title="Arbeiter" />
            ${COLONY/getWorkers}
          </td>
          <td class="populationValue">
            <div>Verfügbar</div>
            <img src="assets/bev/bev_unused_5_${THIS/getUser/getFactionId}.png" title="Freie Bevölkerung" />
            ${COLONY/getWorkless}
          </td>
          <td class="populationValue">
            <div>Wohnraum</div>
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Wohnraum" />
            ${COLONY/getFreeHousing} (${COLONY/getMaxBev})
          </td>
          <td class="populationValue">
            <div>Entwicklung</div>
            <img src="assets/bev/bev_unused_5_${THIS/getUser/getFactionId}.png" title="Wachstum" />
            ${IMMIGRATION_SYMBOL}${COLONY_SURFACE/getPopulation/getGrowth}
          </td>
        </tr>
      </table>
      <tal:block tal:condition="EFFECTS">
        <br />
        <div style="white-space: normal">
          <div class="box">
            <div class="box_title">Effekte</div>
            <div class="box_body">
              <div class="colonyEffectGrid">
                <tal:block tal:repeat="data EFFECTS">
                  <div class="colonyEffectContainer">
                    <img src="assets/commodities/${data/commodity/getId}.png"
                      tal:attributes="title data/commodity/getName" />
                    <span tal:content="data/commodity/getName">EFFECT</span>
                  </div>
                  <div tal:content="data/production/getProductionDisplay"
                    tal:attributes="class string:colonyEffectProduction ${data/production/getCssClass}">PROD</div>
                </tal:block>
              </div>
            </div>
          </div>
        </div>
      </tal:block>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="orbitshiplist">
  <ul>
    <tal:block tal:repeat="wrapper WRAPPERS">
      <metal:block metal:use-macro="shipselector" />
    </tal:block>
  </ul>
</metal:block>
<metal:block metal:define-macro="shipselector">
  <li tal:define="data wrapper/get">
    <table class="use" style="width: 100%;" onmouseover="shipSelectorHover(this)"
      onmouseout="shipSelectorHoverEnd(this)" onclick="shipSelectorChoose(this);">
      <tr>
        <td class="darkbg" colspan="5">
          <a tal:condition="wrapper/isOwnedByCurrentUser" type="hidden" href="ship.php?SHOW_SHIP=1&id=${data/getId}" />
          <span tal:replace="structure bbcode:data/getName">SHIPNAME</span> | <span
            tal:replace="structure bbcode:data/getUserName">USERNAME</span>
        </td>
      </tr>
      <tr>
        <td style="width: 20px; vertical-align: middle;">
          <a tal:condition="exists: CAN_UNDOCK"
            href="ship.php?id=${SHIP/getId}&B_UNDOCK_SHIP=1&target=${data/getId}&sstr=${THIS/getSessionString}"><img
              src="/assets/buttons/dock1.png" title="abdocken" /></a>
        </td>
        <td style="width: 120px; vertical-align: middle;">
          <metal:macro metal:use-macro="html/shipmacros.xhtml/shipimagewithoutwarp" tal:define="ship data" />
        </td>
        <td style="width: 150px;">
          <table class="tcal">
            <tr>
              <th style="width: 20px; text-align: center;">
                <img src="assets/buttons/modul_1.png" />
              </th>
              <td style="vertical-align: middle; text-align: center;">
                <span tal:replace="structure wrapper/getHullSystemData/getHullStatusBar">HULL</span>
              </td>
              <td style="text-align: center;">
                ${data/getHull}
              </td>
            </tr>
          </table>
        </td>
        <td colspan="2" tal:condition="data/isDestroyed"></td>
        <tal:block tal:condition="not:data/isDestroyed">
          <td style="width: 150px;" tal:define="shields wrapper/getShieldSystemData">
            <table class="tcal" tal:condition="shields">
              <tr>
                <th style="width: 20px; text-align: center;">
                  <img src="assets/buttons/modul_2.png" />
                </th>
                <td style="text-align: center; vertical-align: middle;">
                  <span tal:replace="structure shields/getShieldStatusBar">SCHILDE</span>
                </td>
                <td style="text-align: center;">
                  ${data/getShield}
                </td>
              </tr>
            </table>
          </td>
          <td style="width: 150px;" tal:define="eps wrapper/getEpsSystemData">
            <table class="tcal" tal:condition="eps">
              <tr>
                <th style="text-align: center; width: 20px;">
                  <img src="assets/buttons/modul_8.png" />
                </th>
                <td style="vertical-align: middle; text-align: center;">
                  <span tal:replace="structure eps/getEpsStatusBar">EPS</span>
                </td>
                <td style="text-align: center;">
                  ${eps/getEps}
                </td>
              </tr>
            </table>
          </td>
        </tal:block>
      </tr>
    </table>
    <input type="hidden" name="selshipid" id="selshipid" value="runtime" tal:attributes="value data/getId" />
  </li>
</metal:block>
<metal:block metal:define-macro="cm_tabs">
  <div tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/2} colmenubutton" onclick="switchColonyMenu(2);">
    <img src="assets/buttons/lupe2.png" /> <span>Informationen</span>
  </div>
  <div tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/1} colmenubutton" onclick="switchColonyMenu(1);">
    <img src="assets/buttons/menu_planets1.png" /> <span>Baumenü</span>
  </div>
  <div tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/4} colmenubutton" onclick="switchColonyMenu(4)">
    <img src="assets/buttons/bar2.png" /> <span>Soziales</span>
  </div>
  <div tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/5} colmenubutton" onclick="switchColonyMenu(5)">
    <img src="assets/buttons/gebact2.png" /> <span>Gebäudeschaltung</span>
  </div>
  <div tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/3} colmenubutton" onclick="switchColonyMenu(3)">
    <img src="assets/buttons/menu_option1.png" /> <span>Einstellungen</span>
  </div>
  <br />
  <div style="display: inline-block">
    <div id="colonyeps">
      <metal:block metal:use-macro="html/colonymacros.xhtml/colonyeps" />
    </div>
    <br />
    <tal:block tal:condition="SHIELDING_MANAGER/hasShielding">
      <div id="colonyshields">
        <metal:block metal:use-macro="html/colonymacros.xhtml/colonyshields" />
      </div>
      <br />
    </tal:block>
    <div id="colsurface">
      <metal:macro metal:use-macro="html/colonymacros.xhtml/colonysurface" />
    </div>
    <br />
    <div id="colonystorage">
      <metal:block metal:use-macro="html/colonymacros.xhtml/colonystorage" />
    </div>
  </div>
</metal:block>
<metal:block metal:define-macro="cm_shipyard_tabs">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <table class="tcal">
        <tr>
          <td style="width: 33%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 33%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/8}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(8,${FUNC/getId});">
              <span>Neuer Bauplan</span>
            </a>
          </td>
          <td style="width: 33%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/9}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(9,${FUNC/getId});">
              <span>Gespeicherte Baupläne</span>
            </a>
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_modulefab_tabs">
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <table class="tcal">
        <tr>
          <td style="width: 50%;" class="colonymenu">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(2);">
              &lt;&lt; Zurück zum Koloniemenü
            </a>
          </td>
          <td style="width: 50%;" tal:attributes="class string:colonymenu ${COLONY_MENU_SELECTOR/7}">
            <a class="colmenubutton" href="javascript:void(0);" onclick="switchColonyMenu(7,${FUNC/getId});">
              <span>Modulherstellung</span>
            </a>
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_misc">
  <metal:macro metal:use-macro="cm_tabs" />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="colmenu" value="cm_misc" />
      <input type="hidden" name="id" value="runtime" tal:attributes="value COLONY/getId" />
      <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
      <table class="tcal">
        <tr>
          <th>Name</th>
        </tr>
        <tr>
          <td>
            <input type="test" value="runtime" tal:attributes="value COLONY/getName" name="colname"
              style="width: 250px;" onkeydown="event.key == 'Enter' && $('changecolonynamebutton').click()" />
            <input type="submit" id="changecolonynamebutton" name="B_CHANGE_NAME" value="Ändern" />
          </td>
        </tr>
      </table>
      <br />
      <div class="divhead">Einwanderung</div>
      <div class="divbody">
        <table cellpadding="0" cellspacing="0" style="width: 100%;">
          <tr>
            <td style="width: 50%;">
              <span tal:condition="COLONY/getImmigrationState">
                Status: <span style="color: #007300;">Erlaubt</span>
              </span>
              <span tal:condition="not:COLONY/getImmigrationState">
                Status: <span style="color: #FF0000;">Verboten</span>
              </span>
            </td>
            <td style="width: 50%; text-align: right;">
              <span tal:condition="COLONY/getImmigrationState">
                <input type="submit" value="Verbieten" name="B_PERMIT_IMMIGRATION" />
              </span>
              <span tal:condition="not:COLONY/getImmigrationState">
                <input type="submit" value="Erlauben" name="B_ALLOW_IMMIGRATION" />
              </span>
            </td>
          </tr>
        </table>
      </div>
      <br />
      <div class="divhead">Bevölkerungslimit</div>
      <div class="divbody">
        <input type="text" size="4" name="poplimit" value="runtime" tal:attributes="value COLONY/getPopulationLimit"
          onkeydown="event.key == 'Enter' && $('setpopulationlimitbutton').click()" />
        <input type="submit" id="setpopulationlimitbutton" name="B_SET_POPULATIONLIMIT" value="Ändern" />
      </div>
      <br />
      <div class="divhead">Kolonie aufgeben</div>
      <div class="divbody">
        <div class="fabutton_red">
          <a href="javascript:void(0);" onclick="showGiveUpWindow(${COLONY/getId});" class="fabutton fabutton_red">
            Kolonie aufgeben
          </a>
        </div>
      </div>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="giveup">
  <form action="colony.php" method="post">
    <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
    <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
    <table class="tcal">
      <tr>
        <td colspan="2">Tippe folgenden Code in das Feld um die Kolonie-Aufgabe zu bestätigen.</td>
      </tr>
      <tr>
        <td tal:content="GIVE_UP_CODE" style="text-align: center; color: Red;">CODE</td>
        <td>
          <input type="text" size="8" name="giveupcode" />
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <input type="submit" class="button" name="B_GIVEUP_COLONY" value="Bestätigen" />
        </td>
      </tr>
    </table>
  </form>
</metal:block>
<metal:block metal:define-macro="cm_modulefab">
  <metal:macro metal:use-macro="cm_modulefab_tabs" />
  <br />
  <metal:macro metal:use-macro="colonymenu_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
      <input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
      <input type="hidden" name="func" id="func" tal:attributes="value FUNC/getFunction" />
      <br />
      <table class="tcal">
        <tr>
          <th>Verfügbare Module</th>
          <th>In Bau</th>
          <th>Lagernd</th>
          <th>Anzahl</th>
        </tr>
        <tr tal:repeat="data MODULE_LIST" tal:attributes="class string:row${repeat/data/odd}">
          <td>
            <div style="margin-bottom: 5px;">
              <img src="assets/commodities/${data/getCommodityId}.png" /> <span tal:content="data/getName">NAME</span>
            </div>
            <div style="display: table-cell;">
              <img src="assets/buttons/e_trans2.png" title="Energie" /> <span
                tal:replace="data/getEnergyCost">ECOST</span>
            </div>
            <tal:block tal:repeat="cost data/getConstructionCosts">
              <div style="display: table-cell; padding-left: 4px;">
                <img src="assets/commodities/${cost/getCommodity/getId}.png"
                  tal:attributes="title cost/getCommodity/getName" />
              </div>
              <div style="display: table-cell; vertical-align: middle;" tal:content="cost/getAmount">COST</div>
            </tal:block>
          </td>
          <td id="module_${data/getModuleId}_action" style="vertical-align: middle; text-align: center;"
            tal:define="QUEUED_AMOUNT data/getAmountQueued">
            <div tal:condition="QUEUED_AMOUNT">
              <div style="display: table-cell; vertical-align:middle;">
                <input type="text" size="2" name="cancel_module[${data/getModuleId}]"
                  id="module_${data/getModuleId}_count" tal:attributes="value QUEUED_AMOUNT" />
              </div>
              <div style="display: table-cell; vertical-align:middle; padding-left: 4px;">
                <a href="Javascript:cancelModuleQueueEntries(${data/getModuleId});"
                  onmouseover="cp('cancelModuleList${data/getModuleId}','buttons/x2')"
                  onmouseout="cp('cancelModuleList${data/getModuleId}','buttons/x1')">
                  <img src="/assets/buttons/x1.png" name="cancelModuleList${data/getModuleId}" title="Anzahl löschen" />
                </a>
              </div>
            </div>
            <div tal:condition="not:QUEUED_AMOUNT">-</div>
          </td>
          <td style="vertical-align: middle; text-align: center;" tal:content="data/getAmountInStock">
          </td>
          <td style="vertical-align: middle; text-align: center;">
            <input type="text" size="2" name="module[${data/getModuleId}]"
              onkeydown="event.key == 'Enter' && $('producebutton').click()" />
          </td>
        </tr>
        <tr>
          <td colspan="3"></td>
          <td>
            <input type="submit" style="cursor: pointer;" id="producebutton" name="B_CREATE_MODULES"
              value="Herstellen" />
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:macro metal:define-macro="queue_count">
  <div tal:condition="QUEUED_AMOUNT">
    <div style="display: table-cell; vertical-align:middle;">
      <input type="text" size="2" name="cancel_module[${MODULE_ID}]" id="module_${MODULE_ID}_count"
        tal:attributes="value QUEUED_AMOUNT" />
    </div>
    <div style="display: table-cell; vertical-align:middle; padding-left: 4px;">
      <a href="Javascript:cancelModuleQueueEntries(${MODULE_ID});"
        onmouseover="cp('cancelModule${MODULE_ID}','buttons/x2')"
        onmouseout="cp('cancelModule${MODULE_ID}','buttons/x1')">
        <img src="/assets/buttons/x1.png" name="cancelModule${MODULE_ID}" title="Anzahl löschen" />
      </a>
    </div>
  </div>
  <div tal:condition="not:QUEUED_AMOUNT">-</div>
</metal:macro>
<metal:block metal:define-macro="cm_shipyard">
  <metal:macro metal:use-macro="cm_shipyard_tabs" />
  <metal:macro metal:use-macro="colonymenu_sub_container">
    <div metal:fill-slot="containment">
      <br />
      <table class="tcal">
        <tr>
          <th>Verfügbare Schiffsrümpfe</th>
        </tr>
        <tr tal:condition="BUILDABLE_SHIPS">
          <td>
            <div tal:repeat="rump BUILDABLE_SHIPS" style="width: 196px; height:120px; float: left;">
              <a class="std" href="?SHOW_MODULE_SCREEN=1&id=${COLONY/getId}&rump=${rump/getId}"
                style="height: 120px; width: 196px; text-align: center; text-decoration: none; display: block;">
                <img src="assets/ships/${rump/getId}.png" tal:attributes="title rump/getName"
                  style="padding-top: 5px;" /><br />
                ${rump/getName}<br /><br />
                <span>Typ</span>: <span tal:replace="rump/getCategoryName">TYPE</span><br />
                <span>Im Einsatz</span>: <span tal:replace="rump/getActiveShipCount">COUNT</span><br />
                <span>Baupläne</span>: <span tal:replace="rump/getBuildplanCount">BUILDPLANS</span>
              </a>
            </div>
          </td>
        </tr>
        <tr tal:condition="not:BUILDABLE_RUMPS">
          <td>Keine Rümpfe zum Bau vorhanden</td>
        </tr>
      </table>
      <input type="hidden" name="id" value="runtime" tal:attributes="value COLONY/getId" />
      <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_buildplans">
  <metal:macro metal:use-macro="cm_shipyard_tabs" />
  <metal:macro metal:use-macro="colonymenu_sub_container">
    <div metal:fill-slot="containment">
      <br />
      <table class="tcal">
        <tr>
          <th></th>
          <th>Anzahl Schiffe</th>
          <th>Bauzeit</th>
          <th></th>
          <th style="width: 20px;"></th>
        </tr>
        <tal:block tal:repeat="item AVAILABLE_BUILDPLANS">
          <tal:block tal:define="data item/plan">
            <tr tal:attributes="class string:row${repeat/item/odd}" style="cursor: pointer;" title="Details">
              <td tal:content="data/getName" class="selectable"
                onclick="toggleTableRowVisible('buildplan_${data/getId}');">NAME</td>
              <td tal:content="data/getShipCount" class="selectable"
                onclick="toggleTableRowVisible('buildplan_${data/getId}');">ANZAHL</td>
              <td tal:content="formatSeconds:data/getBuildtime"
                onclick="toggleTableRowVisible('buildplan_${data/getId}');">BUILDTIME</td>
              <td style="text-align: center;">
                <a class="linkbutton"
                  href="?id=${COLONY/getId}&SHOW_MODULE_SCREEN_BUILDPLAN=1&planid=${data/getId}">Bauplan auswählen</a>
              </td>
              <td style="text-align: center;">
                <a tal:condition="item/deletable" class="linkbutton linkbutton_red"
                  href="?id=${COLONY/getId}&B_DEL_BUILDPLAN=1&planid=${data/getId}&sstr=${THIS/getSessionString}"
                  title="Löschen">X</a>
              </td>
            </tr>
            <tr title="Details schließen" onclick="toggleTableRowVisible('buildplan_${data/getId}');"
              id="buildplan_${data/getId}" style="cursor: pointer; display: none;"
              tal:attributes="class string:row${repeat/item/odd}">
              <td colspan="4">
                <table style="width: 100%">
                  <tr>
                    <td>Rumpf</td>
                    <td>
                      <div style="display: table-cell;">
                        <img src="assets/ships/${data/getRump/getId}.png" />
                      </div>
                      <span style="display: table-cell; vertical-align: middle;"
                        tal:content="data/getRump/getName">NAME</span>
                    </td>
                  </tr>
                  <tr>
                    <td>Module</td>
                    <td>
                      <img src="assets/commodities/${module/getModule/getCommodityId}.png"
                        tal:attributes="name module/getModule/getName" tal:repeat="module data/getModules" />
                    </td>
                  </tr>
                  <tr>
                    <td>Crewbedarf</td>
                    <td tal:content="data/getCrew">CREW</td>
                  </tr>
                </table>
              </td>
            </tr>
          </tal:block>
        </tal:block>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:block metal:define-macro="cm_waste">
  <metal:macro metal:use-macro="colonymenu_sub_container">
    <div metal:fill-slot="containment">
      <input type="hidden" name="id" value="runtime" tal:attributes="value COLONY/getId" />
      <input type="hidden" name="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
      <br />
      <table class="use" style="width: 433px;">
        <tr tal:attributes="class string:row${repeat/stor/odd}" tal:repeat="stor COLONY/getStorage">
          <td style="vertical-align: middle;">
            <div style="display: table-cell; width: 55px;">
              <img src="assets/commodities/${stor/getCommodity/getId}.png"
                tal:attributes="title stor/getCommodity/getName" />
            </div>
            <div style="display: table-cell; width: 40px; vertical-align:middle;">
              <span tal:replace="stor/getAmount">AMOUNT</span>
            </div>
            <div style="display: table-cell; vertical-align: middle" tal:content="stor/getCommodity/getName">NAME</div>
          </td>
          <td style="vertical-align: middle; text-align: center;">
            <input type="text" size="2" name="commodity[${stor/getCommodity/getId}]"
              onkeydown="event.key == 'Enter' && $('removewastebutton').click()" />
          </td>
        </tr>
        <tr>
          <td></td>
          <td>
            <input type="submit" style="cursor: pointer;" id="removewastebutton" name="B_REMOVE_WASTE"
              value="Waren entsorgen" />
          </td>
        </tr>
      </table>
    </div>
  </metal:macro>
</metal:block>
<metal:macro metal:define-macro="telescopescan">
  <table class="tcal" style="width: 300px;">
    <tr>
      <th style="width: 60%;">Rumpfkategorie</th>
      <th style="width: 40%;">Anzahl</th>
    </tr>
    <tr tal:repeat="data INFOS">
      <td>${data/category_name}</td>
      <td>${data/amount}</td>
    </tr>
  </table>
</metal:macro>
<metal:block metal:define-macro="entity_not_available">
  <div class="box">
    <div class="box_body">Das Ziel wurde nicht gefunden</div>
  </div>
</metal:block>
<metal:block metal:define-macro="cm_buildplan_deleted">
  <div class="box">
    <div class="box_body">Bauplan wurde gelöscht</div>
  </div>
</metal:block>
<metal:block metal:define-macro="buildinginfo">
  <metal:macro use-macro="building_preview"
    tal:define="display string:block;preview_id string:building_preview_default; building buildingdata" />
  <tal:block tal:repeat="buildingalt ALTERNATIVE_BUILDINGS">
    <metal:macro use-macro="building_preview"
      tal:define="display string:none;building buildingalt/getAlternativeBuilding; preview_id string:building_preview_${buildingalt/getFieldType}" />
  </tal:block>
  <metal:macro metal:define-macro="building_preview">
    <table class="use building_preview_table" style="width: 390px; display: ${display};" tal:attributes="id preview_id">
      <tr>
        <td class="center" style="vertical-align: top; width: 100px;">
          <br />
          <img src="assets/generated/buildings/${building/getId}/0at.png" />
          <br /><br />
          <strong>Baubar</strong><br />
          <strong>Anzahl:</strong> <span id="counter">${buildingcount}</span><br />
          <img src="#" tal:repeat="field USEABLE_FIELD_TYPES"
            tal:attributes="src string:assets/generated/fields/t${field/getFieldTypeId}.png; title planetFieldTypeDescription:field/getFieldTypeId"
            style="width: 15px; height: 15px; margin-right: 4px; margin-bottom: 4px;" />
        </td>
        <td style="vertical-align: top; width: 110px;">
          <strong>Baukosten</strong><br />
          <img src="assets/buttons/e_trans2.png" title="Energie" /> ${building/getEpsCost}
          <div tal:repeat="data building/getCosts">
            <img src="assets/commodities/${data/getCommodityId}.png" tal:attributes="title data/getCommodity/getName" />
            <span tal:replace="data/getAmount">CNT</span>
          </div>
          <br />
          <strong>Bauzeit</strong><br />
          <span tal:replace="formatSeconds:building/getBuildTime">BUILDTIME</span>
          <br />
          <tal:block tal:condition="php: building.hasLimit() OR building.hasLimitColony()">
            <br />
            <strong>Limits</strong><br />
            <tal:block tal:condition="building/hasLimitColony">
              <span>Kolonie: ${building/getLimitColony}</span><br />
            </tal:block>
            <span tal:condition="building/hasLimit">Account: ${building/getLimit}</span>
          </tal:block>
        </td>
        <td style="vertical-align: top; width: 110px;">
          <div tal:condition="building/isActivateable">
            <strong>Produktion</strong>
            <div tal:condition="building/getEpsProduction">
              <img src="assets/buttons/e_trans2.png" title="Energie" /> <span
                tal:replace="addPlusCharacter:building/getEpsProduction">EPSDISPLAY</span>
            </div>
            <div tal:repeat="data building/getCommodities">
              <img src="assets/commodities/${data/getCommodityId}.png"
                tal:attributes="title data/getCommodity/getName" />
              <span tal:condition="isPositive:data/getAmount">+${data/getAmount}</span>
              <span tal:condition="isNegative:data/getAmount">${data/getAmount}</span>
            </div>
            <br />
          </div>
          <br />
          <strong>Vorschau</strong>
          <div tal:condition="building/getEpsProduction">
            <img src="assets/buttons/e_trans2.png" title="Energie" />
            <span tal:content="ENERGY_PRODUCTION_PREVIEW/${building/getId}/getDisplay"
              tal:attributes="class ENERGY_PRODUCTION_PREVIEW/${building/getId}/getCSS">EPSDISPLAY</span>
            (<span tal:content="addPlusCharacter:building/getEpsProduction"
              tal:attributes="class building/getEpsProductionCss">EPSDISPLAY</span>)
          </div>
          <div tal:repeat="data COMMODITY_PRODUCTION_PREVIEW/${building/getId}">
            <img src="assets/commodities/${data/getCommodityId}.png" tal:attributes="title data/getCommodity/getName" />
            <span tal:attributes="class data/getCssClass" tal:content="data/getProductionDisplay">CNT</span>
            <tal:block tal:condition="data/getPreviewProduction">
              (<span tal:content="data/getPreviewProductionDisplay"
                tal:attributes="class data/getPreviewProductionCss">CNT</span>)
            </tal:block>
          </div>
        </td>
        <td style="vertical-align: top; width: 110px;">
          <strong>Auswirkungen</strong>
          <div tal:condition="building/getHousing">
            <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Wohnraum" /> +<span
              tal:replace="building/getHousing">HOUSING</span>
          </div>
          <div tal:condition="building/getWorkers">
            <img src="assets/bev/bev_used_5_${THIS/getUser/getFactionId}.png" title="Arbeiter" /> -<span
              tal:replace="building/getWorkers">WORKERS</span>
          </div>
          <div tal:condition="building/getStorage">
            <img src="assets/buttons/lager.png" title="Lagerraum" /> +<span
              tal:replace="building/getStorage">STORAGE</span>
          </div>
          <div tal:condition="building/getEpsStorage">
            <img src="assets/buttons/eps.png" title="Energiespeicher" /> +<span
              tal:replace="building/getEpsStorage">EPSSTORAGE</span>
          </div>
          <div tal:condition="building/getShieldCapacity">
            <img src="assets/buttons/shldp2.png" title="Schilde" /> +<span
              tal:replace="building/getShieldCapacity">SHIELDS</span>
          </div>
        </td>
      </tr>
    </table>
  </metal:macro>
</metal:block>
<metal:macro metal:define-macro="colonysurface" tal:define="style string:margin: 1px;; width: 42px;; height: 42px;;">
  <div tal:attributes="style string:${COLONY_SURFACE/getSurfaceTileStyle}">
    <tal:block tal:repeat="field COLONY_SURFACE/getSurface">
      <tal:block tal:condition="not:field/hasBuilding">
        <div tal:condition="not:field/getTerraforming" style="${style}" tal:attributes="class field/getCssClass">
          <div style="width: 40px; height: 40px;" onclick="fieldMouseClick(this,${field/getFieldId},0);"
            id="field${field/getFieldId}">
            <div>
              <div><img onmouseover="fieldMouseOver(this,${field/getFieldId},0,${field/getFieldType})"
                  onmouseout="fieldMouseOut(this,${field/getFieldType})" style="width: 40px; height: 40px;"
                  title="runtime" tal:attributes="title planetFieldTitle:field"
                  src="assets/generated/fields/${field/getDayNightPrefix}${field/getFieldType}.png" /></div>
            </div>
          </div>
        </div>
        <div tal:condition="field/getTerraforming" style="${style};" tal:attributes="class field/getCssClass">
          <div
            style="background-image: url(assets/generated/fields/${field/getDayNightPrefix}${field/getFieldType}.png); width: 40px; height: 40px;"
            onclick="fieldMouseClick(this,${field/getFieldId},0);" id="field${field/getFieldId}">
            <div>
              <div><img class="action" style="width: 40px; height: 40px;" title="runtime"
                  tal:attributes="title planetFieldTitle:field"
                  src="assets/terraform/${field/getTerraforming/getId}/${field/getDayNightPrefix}.png" /></div>
            </div>
          </div>
        </div>
      </tal:block>
      <tal:block tal:condition="field/hasBuilding">
        <div tal:condition="not:field/isUnderConstruction" style="${style}" tal:attributes="class field/getCssClass">
          <div
            style="background-image: url(assets/generated/fields/${field/getDayNightPrefix}${field/getFieldType}.png); width: 40px; height: 40px;"
            onclick="fieldMouseClick(this,${field/getFieldId},${field/getBuildingId});" id="field${field/getFieldId}">
            <div onmouseover="fieldMouseOver(this,${field/getFieldId},${field/getBuildingId},${field/getFieldType})"
              onmouseout="fieldMouseOut(this,${field/getFieldType})">
              <div><img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title planetFieldTitle:field"
                  src="assets/generated/buildings/${field/getBuildingId}/${field/getBuilding/getBuildingType}${field/getBuildingState}${field/getDayNightPrefix}.png" />
              </div>
            </div>
          </div>
        </div>
        <div tal:condition="field/isUnderConstruction" style="${style}" tal:attributes="class field/getCssClass">
          <div
            style="background-image: url(assets/generated/fields/${field/getDayNightPrefix}${field/getFieldType}.png); width: 40px; height: 40px;"
            onclick="fieldMouseClick(this,${field/getFieldId},${field/getBuildingId});" id="field${field/getFieldId}">
            <div onmouseover="fieldMouseOver(this,${field/getFieldId},${field/getBuildingId},${field/getFieldType})"
              onmouseout="fieldMouseOut(this,${field/getFieldType})"
              style="width: 40px; height: 40px; background-image: url(assets/generated/buildings/${field/getPictureType}${field/getDayNightPrefix}.png)">
              <div style="height: 40px; overflow: hidden; width: ${field/getOverlayWidth}px;"><img
                  style="width: 40px; height: 40px;" title="runtime" tal:attributes="title planetFieldTitle:field"
                  src="assets/generated/buildings/${field/getBuildingId}/${field/getBuilding/getBuildingType}a${field/getDayNightPrefix}.png" />
              </div>
            </div>
          </div>
        </div>
      </tal:block>
    </tal:block>
  </div>
</metal:macro>
<metal:macro metal:define-macro="fieldaction">
  <table class="use" style="width: 600px;">
    <tr>
      <td>
        <div style="width: 100%;" tal:condition="FIELD/isUnderConstruction">
          <div
            style="background-image: url(assets/generated/fields/t${FIELD/getFieldType}.png); width: 40px; height: 40px; display: table-cell;">
            <div
              style="width: 40px; height: 40px; background-image: url(assets/generated/buildings/${FIELD/getPictureType}${FIELD/getDayNightPrefix}.png)">
              <div style="height: 40px; overflow: hidden; width: ${FIELD/getOverlayWidth}px;">
                <img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title planetFieldTitle:FIELD"
                  src="assets/generated/buildings/${FIELD/getBuildingId}/${FIELD/getBuilding/getBuildingType}a${FIELD/getDayNightPrefix}.png" />
              </div>
            </div>
          </div>
          <div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;">
            <span style="font-weight: bold;">${FIELD/getBuilding/getName}</span><br />
            <div onmouseover="cp('fieldinfo','buttons/info2')" onmouseout="cp('fieldinfo','buttons/info1')">
              <span>auf</span> ${planetFieldTypeDescription:FIELD/getFieldType} <a
                href="https://wiki.stuniverse.de/index.php?title=Kartenfelder" target="_blank">
                <img src="assets/buttons/info1.png" name="fieldinfo" width="12" height="12"
                  title="Wiki-Info über Kartenfelder" />
              </a>
            </div>
          </div>
          <div>
            <div style="display: table-cell; padding-top: 5px;" tal:content="structure FIELD/getConstructionStatusBar">
              STATUSBAR</div>
            <div style="display: table-cell; vertical-align: middle; padding-left: 5px;">
              <span>Fertigstellung</span>: <span tal:replace="datetime:FIELD/getBuildtime">DATE</span>
            </div>
          </div>
          <tal:block tal:condition="FIELD/getBuilding/isActivateable">
            <div class="fabutton" tal:condition="FIELD/getActivateAfterBuild">
              <a href="?id=${COLONY/getId}&B_DEACTIVATE=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                class="fabutton">Nach Bau deaktivieren</a>
            </div>
            <div class="fabutton" tal:condition="not:FIELD/getActivateAfterBuild">
              <a href="?id=${COLONY/getId}&B_ACTIVATE=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                class="fabutton">Nach Bau aktivieren</a>
            </div>
            <br />
          </tal:block>
        </div>
        <div tal:condition="not:FIELD/isUnderConstruction">
          <div tal:condition="not: FIELD/hasBuilding">
            <div style="display: table-cell;">
              <img src="assets/generated/fields/t${FIELD/getFieldType}.png" /><br />
            </div>
            <div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;"
              onmouseover="cp('fieldinfo','buttons/info2')" onmouseout="cp('fieldinfo','buttons/info1')">
              ${planetFieldTypeDescription:FIELD/getFieldType} <a
                href="https://wiki.stuniverse.de/index.php?title=Kartenfelder" target="_blank">
                <img src="assets/buttons/info1.png" name="fieldinfo" width="12" height="12"
                  title="Wiki-Info über Kartenfelder" />
              </a>
            </div>
          </div>
          <div tal:condition="FIELD/hasBuilding">
            <div style="display: table-cell">
              <div
                style="background-image: url(assets/generated/fields/t${FIELD/getFieldType}.png); width: 40px; height: 40px;">
                <img style="width: 40px; height: 40px;" title="runtime" tal:attributes="title planetFieldTitle:FIELD"
                  src="assets/generated/buildings/${FIELD/getBuildingId}/${FIELD/getBuilding/getBuildingType}${FIELD/getBuildingState}${FIELD/getDayNightPrefix}.png" />
              </div>
            </div>
            <div style="text-align: left; padding-left: 5px; display: table-cell; vertical-align: top;">
              <span style="font-weight: bold;">${FIELD/getBuilding/getName}</span><br />
              <div onmouseover="cp('fieldinfo','buttons/info2')" onmouseout="cp('fieldinfo','buttons/info1')">
                <span>auf</span> ${planetFieldTypeDescription:FIELD/getFieldType} <a
                  href="https://wiki.stuniverse.de/index.php?title=Kartenfelder" target="_blank">
                  <img src="assets/buttons/info1.png" name="fieldinfo" width="12" height="12"
                    title="Wiki-Info über Kartenfelder" />
                </a>
              </div><br />
              <span>Integrität</span>: ${FIELD/getIntegrity}/${FIELD/getBuilding/getIntegrity}
            </div>
            <br /><br />
            <tal:block tal:condition="BUILDING_FUNCTION/isShipyard">
              <tal:block tal:condition="not:BUILDING_FUNCTION/isFighterShipyard">
                <div class="fabutton">
                  <a href="javascript:void(0)"
                    onclick="switchColonyMenu(8,${BUILDING_FUNCTION/getShipyardBuildingFunctionId});cClick();"
                    class="fabutton">Schiffbau</a>
                </div>
              </tal:block>
              <tal:block tal:condition="BUILDING_FUNCTION/isFighterShipyard">
                <div class="fabutton">
                  <a href="javascript:void(0)" onclick="switchColonyMenu(10);cClick();" class="fabutton">Schiffbau</a>
                </div>
              </tal:block>
              <div class="fabutton">
                <a href="colony.php?id=${COLONY/getId}&SHOW_SHIP_REPAIR=1&fid=${FIELD/getFieldId}"
                  class="fabutton">Schiffsreparatur</a>
              </div>
              <tal:block tal:condition="not:BUILDING_FUNCTION/isFighterShipyard">
                <div class="fabutton">
                  <a href="colony.php?id=${COLONY/getId}&SHOW_SHIP_DISASSEMBLY=1&fid=${FIELD/getFieldId}"
                    class="fabutton">Schiffsdemontage</a>
                </div>
              </tal:block>
            </tal:block>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isAirfield">
              <a href="javascript:void(0)" onclick="switchColonyMenu(6);cClick();" class="fabutton">Hangar</a>
            </div>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isModuleFab">
              <a href="javascript:void(0)"
                onclick="switchColonyMenu(7,${BUILDING_FUNCTION/getModuleFabBuildingFunctionId});cClick();"
                class="fabutton">Modulherstellung</a>
            </div>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isTorpedoFab">
              <a href="javascript:void(0)" onclick="switchColonyMenu(11);cClick();"
                class="fabutton">Torpedoherstellung</a>
            </div>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isAcademy">
              <a href="javascript:void(0)" onclick="switchColonyMenu(12);cClick();" class="fabutton">Akademie</a>
            </div>
            <tal:block tal:condition="BUILDING_FUNCTION/isWarehouse">
              <div class="fabutton">
                <a href="javascript:void(0)" onclick="goToUrl('database.php?SHOW_COMMODITIES_OVERVIEW=1')"
                  class="fabutton">Warenübersicht</a>
              </div>
              <div class="fabutton">
                <a href="javascript:void(0)" onclick="switchColonyMenu(13);cClick();"
                  class="fabutton">Müllverbrennung</a>
              </div>
            </tal:block>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isFabHall">
              <a href="javascript:void(0)"
                onclick="switchColonyMenu(14, ${BUILDING_FUNCTION/getFabHallBuildingFunctionId});cClick();"
                class="fabutton">Ersatzteilherstellung</a>
            </div>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isTechCenter">
              <a href="javascript:void(0)"
                onclick="switchColonyMenu(15, ${BUILDING_FUNCTION/getTechCenterBuildingFunctionId});cClick();"
                class="fabutton">Systemkomponentenherstellung</a>
            </div>
            <div class="fabutton" tal:condition="BUILDING_FUNCTION/isSubspaceTelescope">
              <a href="javascript:void(0)"
                onclick="switchColonyMenu(16, ${BUILDING_FUNCTION/getSubspaceTelescopeBuildingFunctionId});cClick();"
                class="fabutton">Subraumteleskop</a>
            </div>
            <br />
          </div>
          <tal:block tal:condition="FIELD/hasBuilding">
            <tal:block tal:condition="FIELD/isActivateAble">
              <div tal:condition="FIELD/hasHighDamage">
                Das Gebäude ist stark beschädigt und kann nicht aktiviert werden.
              </div>
            </tal:block>
          </tal:block>
        </div>
      </td>
      <td tal:condition="FIELD/hasBuilding" style="vertical-align: top; width: 100px;">
        <strong>Auswirkungen</strong>
        <div tal:condition="FIELD/getBuilding/getHousing">
          <img src="assets/bev/bev_free_5_${THIS/getUser/getFactionId}.png" title="Wohnraum" /> +<span
            tal:replace="FIELD/getBuilding/getHousing">HOUSING</span>
        </div>
        <div tal:condition="FIELD/getBuilding/getWorkers">
          <img src="assets/bev/bev_used_5_${THIS/getUser/getFactionId}.png" title="Arbeiter" /> -<span
            tal:replace="FIELD/getBuilding/getWorkers">WORKERS</span>
        </div>
        <div tal:condition="FIELD/getBuilding/getStorage">
          <img src="assets/buttons/lager.png" title="Lagerraum" /> +<span
            tal:replace="FIELD/getBuilding/getStorage">STORAGE</span>
        </div>
        <div tal:condition="FIELD/getBuilding/getEpsStorage">
          <img src="assets/buttons/eps.png" title="Energiespeicher" /> +<span
            tal:replace="FIELD/getBuilding/getEpsStorage">EPSSTORAGE</span>
        </div>
        <div tal:condition="FIELD/getBuilding/getShieldCapacity">
          <img src="assets/buttons/shldp2.png" title="Schilde" /> +<span
            tal:replace="FIELD/getBuilding/getShieldCapacity">SHIELDS</span>
        </div>
        <div tal:condition="FIELD/getBuilding/isActivateable">
          <br />
          <strong>Produktion</strong>
          <div tal:condition="FIELD/getBuilding/getEpsProduction">
            <img src="assets/buttons/e_trans2.png" title="Energie" /> <span
              tal:replace="addPlusCharacter:FIELD/getBuilding/getEpsProduction">EPSDISPLAY</span>
          </div>
          <div tal:repeat="data FIELD/getBuilding/getCommodities">
            <img src="assets/commodities/${data/getCommodityId}.png" tal:attributes="title data/getCommodity/getName" />
            <span tal:condition="isPositive:data/getAmount">+${data/getAmount}</span>
            <span tal:condition="isNegative:data/getAmount">${data/getAmount}</span>
          </div>
          <br />
        </div>
      </td>
      <td rowspan="2" tal:condition="HAS_UPGRADE_OR_TERRAFORMING_OPTION" style="width: 200px; vertical-align: top;">
        <div tal:condition="UPGRADE_OPTIONS">
          <div tal:repeat="data UPGRADE_OPTIONS">
            <table class="tcal">
              <tr>
                <th tal:content="data/getDescription" colspan="4">DESCRIPTION</th>
              </tr>
              <tr>
                <td style="width: 50px; height: 45px; text-align: center; vertical-align: middle">
                  <img src="assets/generated/buildings/${FIELD/getBuilding/getId}/0at.png" />
                </td>
                <td style="text-align: center; vertical-align: middle">
                  =&gt;
                </td>
                <td style="width: 50px; height: 45px; text-align: center; vertical-align: middle">
                  <img src="assets/generated/buildings/${data/getUpgradeToBuildingId}/0at.png" />
                </td>
                <td style="vertical-align: top; width: 100px;">
                  <strong>Kosten</strong><br />
                  <img src="assets/buttons/e_trans2.png" title="Energie" /> ${data/getBuilding/getEpsCost}
                  <div tal:repeat="cost data/getUpgradeCosts">
                    <img src="assets/commodities/${cost/getCommodityId}.png"
                      tal:attributes="title cost/getCommodity/getName" /> <span tal:replace="cost/getAmount">CNT</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td colspan="4" style="text-align: center;">
                  <a href="?B_UPGRADE_BUILDING=1&id=${COLONY/getId}&fid=${FIELD/getFieldId}&upid=${data/getId}&sstr=${THIS/getSessionString}"
                    class="linkbutton">Durchführen</a>
                </td>
              </tr>
            </table>
            <br />
          </div>
        </div>
        <div tal:condition="not:FIELD/hasBuilding">
          <tal:block tal:condition="FIELD/getTerraforming">
            <table class="use" style="width: 250px;">
              <tr>
                <th colspan="3" style="text-align: center;">
                  <span tal:content="FIELD/getTerraforming/getDescription">DESCRIPTION</span> läuft
                </th>
              </tr>
              <tr>
                <td style="width: 45px; text-align: center;">
                  <img src="assets/generated/fields/${FIELD/getTerraforming/getFromFieldTypeId}.png" />
                </td>
                <td style="vertical-align: middle; width: 50px; text-align: center;">
                  <div style="padding-top: 5px;" tal:content="structure TERRAFORMING_BAR">STATUSBAR</div>
                </td>
                <td style="width: 45px; text-align: center;">
                  <img src="assets/generated/fields/${FIELD/getTerraforming/getToFieldTypeId}.png" />
                </td>
              </tr>
              <tr>
                <td colspan="3" style="text-align: center;">
                  Fertigstellung: <span tal:replace="datetime:TERRAFORMING_STATE/getFinishDate">FINISH</span>
                </td>
              </tr>
            </table>
          </tal:block>
          <tal:block tal:condition="not:FIELD/getTerraforming">
            <div tal:condition="TERRAFORMING_OPTIONS">
              <table class="use" style="width: 250px;" tal:repeat="data TERRAFORMING_OPTIONS">
                <tr>
                  <th colspan="4" tal:content="data/getDescription">DESCRIPTION</th>
                </tr>
                <tr>
                  <td style="width: 45px;">
                    <img src="assets/generated/fields/t${data/getFromFieldTypeId}.png" />
                  </td>
                  <td style="vertical-align: middle; width: 50px; text-align: center;">
                    =&gt;
                  </td>
                  <td style="width: 45px;">
                    <img src="assets/generated/fields/t${data/getToFieldTypeId}.png" />
                  </td>
                  <td style="vertical-align: top;" rowspan="2">
                    <strong>Kosten</strong>
                    <br />
                    <img src="assets/buttons/e_trans2.png" title="Energie" /> <span
                      tal:replace="data/getEnergyCosts">EPS</span>
                    <div tal:repeat="cost data/getCosts">
                      <img src="assets/commodities/${cost/getCommodityId}.png" title="runtime"
                        tal:attributes="title cost/getCommodity/getName" /> <span
                        tal:replace="cost/getAmount">COUNT</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td colspan="3" style="text-align: center">
                    <a href="?B_TERRAFORM=1&id=${COLONY/getId}&fid=${FIELD/getFieldId}&tfid=${data/getId}&sstr=${THIS/getSessionString}"
                      class="linkbutton">Durchführen</a>
                    <br />
                    <strong>Dauer</strong><br />
                    <span tal:replace="formatSeconds:data/getDuration">DURATION</span>
                  </td>
                </tr>
              </table>
              <br />
            </div>
          </tal:block>
        </div>
      </td>
    </tr>
    <tr tal:condition="FIELD/hasBuilding">
      <td colspan="2" style="text-align: center;">
        <table cellpadding="0" cellspacing="0">
          <tr>
            <td style="width: 100px;" tal:condition="FIELD/isActivateAble">
              <tal:block tal:condition="not:FIELD/hasHighDamage">
                <div class="fabutton" tal:condition="FIELD/isActive">
                  <a href="?id=${COLONY/getId}&B_DEACTIVATE=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                    class="fabutton">Deaktivieren</a>
                </div>
                <div class="fabutton" tal:condition="not:FIELD/isActive">
                  <a href="?id=${COLONY/getId}&B_ACTIVATE=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                    class="fabutton">Aktivieren</a>
                </div>
              </tal:block>
            </td>
            <td style="width: 100px;">
              <div class="fabutton" tal:condition="FIELD/isDamaged">
                <a href="?id=${COLONY/getId}&B_REPAIR=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                  class="fabutton">Reparieren</a>
              </div>
            </td>
            <td style="width: 100px;">
              <div class="fabutton_red" tal:condition="FIELD/getBuilding/isRemovable">
                <a href="javascript:void(0);" onclick="toggleVisible('confirm_remove')"
                  class="fabutton fabutton_red">Demontieren</a>
              </div>
            </td>
            <td style="width: 100px;">
              <div id="confirm_remove" style="display:none;" class="fabutton_red"
                tal:condition="FIELD/getBuilding/isRemovable">
                <a href="?id=${COLONY/getId}&B_REMOVE_BUILDING=1&fid=${FIELD/getFieldId}&sstr=${THIS/getSessionString}"
                  class="fabutton fabutton_red">bestätigen</a>
              </div>
            </td>
          </tr>
        </table>
        <tal:block tal:condition="BUILDING_FUNCTION/isShipyard">
          <metal:macro metal:use-macro="ship_buildprogress" tal:condition="SHIP_BUILD_PROGRESS" />
          <metal:macro metal:use-macro="ship_repairprogress" tal:condition="SHIP_REPAIR_PROGRESS" />
        </tal:block>
      </td>
    </tr>
  </table>
</metal:macro>
<metal:macro metal:define-macro="ship_buildprogress">
  <table class="tcal">
    <tr>
      <th colspan="3">Schiffe in Bau</th>
    </tr>
    <tr tal:repeat="data SHIP_BUILD_PROGRESS" style="height: 50px" tal:attributes="class string:row${repeat/data/odd}">
      <td style="text-align: center; vertical-align: middle;">
        <img src="assets/ships/${data/getRump/getId}.png" />
      </td>
      <td style="text-align: center; vertical-align: middle" tal:content="data/getRump/getName">RUMP</td>
      <tal:block tal:condition="not:data/getStopDate">
        <td style="text-align: center; vertical-align: middle">
          <span tal:replace="datetime:data/getFinishDate">DATE</span>
        </td>
      </tal:block>
      <td colspan="2" style="text-align: center; vertical-align: middle" tal:condition="data/getStopDate">Angehalten
      </td>
    </tr>
  </table>
</metal:macro>
<metal:macro metal:define-macro="ship_repairprogress">
  <table class="tcal">
    <tr>
      <th colspan="5">Schiffe in Reparatur</th>
    </tr>
    <tr tal:repeat="wrapper SHIP_REPAIR_PROGRESS" style="height: 50px"
      tal:attributes="class string:row${repeat/wrapper/odd}">
      <td style="text-align: center; vertical-align: middle;">
        <img src="assets/ships/${wrapper/get/getRump/getId}.png" title="${wrapper/get/getRump/getName}" />
      </td>
      <td style="text-align: center; vertical-align: middle">
        <span tal:replace="structure bbcode:wrapper/get/getName">NAME</span>
      </td>
      <td style="text-align: center; vertical-align: middle">
        <img src="assets/buttons/modul_1.png" title="Hülle" style="width: 12px; height: 12px;" />
        ${wrapper/get/getHull}/${wrapper/get/getMaxHull}
      </td>
      <td style="text-align: center; vertical-align: middle">
        <img tal:repeat="sys wrapper/getDamagedSystems" title="${sys/getName}: ${sys/getStatus}%"
          style="margin-right: 5px;" class="${sys/getCssClass}" src="assets/system/${sys/getSystemType/value}.png" />
      </td>
      <td>
        <a href="?id=${COLONY/getId}&B_CANCEL_REPAIR=1&shipid=${wrapper/get/getId}&sstr=${THIS/getSessionString}"
          onmouseover="cp('cancel${wrapper/get/getId}','buttons/x2');"
          onmouseout="cp('cancel${wrapper/get/getId}','buttons/x1');">
          <span tal:content="wrapper/getRepairDuration">DURATION</span> Ticks
          <img src="assets/buttons/x1.png" name="cancel${wrapper/get/getId}" title="Reparatur abbrechen" />
        </a>
      </td>
    </tr>
  </table>
</metal:macro>
<metal:block metal:define-macro="show_ship_beamto">
  <form action="colony.php" method="post">
    <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
    <input type="hidden" name="target" tal:attributes="value targetShip/getId" />
    <input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
    <table class="tcal">
      <tr>
        <td colspan="2">Ziel: <span tal:replace="structure bbcode:targetShip/getName">...</span></td>
      </tr>
      <tr>
        <td colspan="2">Kapazität pro 1 Energie: <span tal:replace="structure bbcode:COLONY/getBeamFactor">...</span>
        </td>
      </tr>
      <tr>
        <td style="width: 100%;" tal:define="COLONY_STORAGE COLONY/getBeamableStorage">
          <tal:block tal:condition="COLONY_STORAGE" tal:repeat="stor COLONY_STORAGE">
            <input type="hidden" name="commodities[]" tal:attributes="value stor/getCommodityId" />
            <div tal:condition="repeat/stor/odd" style="float: right; width: 50%;">
              <metal:macro metal:use-macro="macros.xhtml/commoditySelection"
                tal:define="name stor/getCommodity/getName; commodityId stor/getCommodity/getId; amount stor/getAmount" />
            </div>
            <div tal:condition="repeat/stor/even" style="float: left; width: 50%;">
              <metal:macro metal:use-macro="macros.xhtml/commoditySelection"
                tal:define="name stor/getCommodity/getName; commodityId stor/getCommodity/getId; amount stor/getAmount" />
            </div>
            <br tal:condition="repeat/stor/odd" style="clear: both;" />
          </tal:block>
          <tal:block tal:condition="not:COLONY_STORAGE">
            Keine Waren vorhanden
          </tal:block>
        </td>
        <td rowspan="2" style="height: 100%;">
          <table style="width: 100%; height: 100%;">
            <tr>
              <td style="text-align: center;">
                <metal:macro metal:use-macro="html/shipmacros.xhtml/shipimagewithoutwarp"
                  tal:define="ship targetShip" />
              </td>
            </tr>
            <tr>
              <td style="text-align: center; height: 10%;">
                <a href="javascript:void(0);" onclick="triggerBeamFrom()"
                  onmouseover="cp('beamtrigger','buttons/b_up2');" onmouseout="cp('beamtrigger','buttons/b_up1');">
                  <img src="assets/buttons/b_up1.png" name="beamtrigger" title="Beammodus wechseln" />
                </a>
              </td>
            </tr>
            <tr>
              <td style="text-align: center;">
                <a href="?id=${COLONY/getId}">
                  <img src="assets/planets/${COLONY/getColonyClassId}.png" />
                </a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td style="text-align: center;">
          <input type="button" class="button" value="max" onclick="maximizeCommodityAmounts();" /> <input type="submit"
            class="button" value="Beamen" name="B_BEAMTO" />
        </td>
      </tr>
    </table>
  </form>
</metal:block>
<metal:block metal:define-macro="show_ship_beamfrom">
  <form action="colony.php" method="post">
    <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
    <input type="hidden" name="target" tal:attributes="value targetShip/getId" />
    <input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
    <table class="tcal">
      <tr>
        <td colspan="2">Ziel: <span tal:replace="structure bbcode:targetShip/getName">...</span></td>
      </tr>
      <tr>
        <td colspan="2">Kapazität pro 1 Energie: <span tal:replace="structure bbcode:COLONY/getBeamFactor">...</span>
        </td>
      </tr>
      <tr>
        <td style="width: 100%;">
          <tal:block tal:condition="targetShip/getBeamableStorage" tal:repeat="stor targetShip/getBeamableStorage">
            <input type="hidden" name="commodities[]" tal:attributes="value stor/getCommodityId" />
            <div tal:condition="repeat/stor/odd" style="float: right; width: 50%;">
              <metal:macro metal:use-macro="macros.xhtml/commoditySelection"
                tal:define="name stor/getCommodity/getName; commodityId stor/getCommodityId; amount stor/getAmount" />
            </div>
            <div tal:condition="repeat/stor/even" style="float: left; width: 50%;">
              <metal:macro metal:use-macro="macros.xhtml/commoditySelection"
                tal:define="name stor/getCommodity/getName; commodityId stor/getCommodityId; amount stor/getAmount" />
            </div>
            <br tal:condition="repeat/stor/odd" style="clear: both;" />
          </tal:block>
          <tal:block tal:condition="not:targetShip/getBeamableStorage">
            Keine Waren vorhanden
          </tal:block>
        </td>
        <td rowspan="2" style="height: 100%;">
          <table style="width: 100%; height: 100%;">
            <tr>
              <td style="text-align: center;">
                <metal:macro metal:use-macro="html/shipmacros.xhtml/shipimagewithoutwarp"
                  tal:define="ship targetShip" />
              </td>
            </tr>
            <tr>
              <td style="text-align: center; height: 10%;">
                <a href="javascript:void(0);" onclick="triggerBeamTo()"
                  onmouseover="cp('beamtrigger','buttons/b_down2');" onmouseout="cp('beamtrigger','buttons/b_down1');">
                  <img src="assets/buttons/b_down1.png" name="beamtrigger" title="Beammodus wechseln" />
                </a>
              </td>
            </tr>
            <tr>
              <td style="text-align: center;">
                <a href="?id=${COLONY/getId}">
                  <img src="assets/planets/${COLONY/getColonyClassId}.png" />
                </a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td style="text-align: center;">
          <input type="button" class="button" value="max" onclick="maximizeCommodityAmounts();" /> <input type="submit"
            value="Beamen" name="B_BEAMFROM" />
        </td>
      </tr>
    </table>
  </form>
</metal:block>
<metal:macro metal:define-macro="sectorscan">
  <tal:block tal:condition="not:ERROR">
    <table class="tcal" tal:condition="SIGNATURES">
      <tr>
        <th colspan="3">Signaturen</th>
      </tr>
      <tr>
        <th>Rumpf</th>
        <th>Schiffsname</th>
        <th>Alter</th>
      </tr>
      <tr tal:repeat="sig SIGNATURES">
        <td>
          <img tal:condition="sig/getRump" src="assets/ships/${sig/getRump/getId}.png"
            tal:attributes="title sig/getRump/getName" />
          <span tal:condition="not:sig/getRump">?</span>
        </td>
        <td>
          <span tal:condition="sig/getShipName" tal:content="structure bbcode:sig/getShipName">.</span>
          <span tal:condition="not:sig/getShipName">?</span>
        </td>
        <td>
          <span tal:content="sig/getAge">.</span>
        </td>
      </tr>
    </table>
    <table class="tcal" tal:condition="php: OTHER_SIG_COUNT OR OTHER_CLOAKED_COUNT">
      <tr>
        <th colspan="2">verblasste Signaturen</th>
      </tr>
      <tr tal:condition="OTHER_SIG_COUNT">
        <td>
          ungetarnt:
        </td>
        <td>
          <span tal:content="OTHER_SIG_COUNT">.</span>
        </td>
      </tr>
      <tr tal:condition="OTHER_CLOAKED_COUNT">
        <td>
          getarnt:
        </td>
        <td>
          <span tal:content="OTHER_CLOAKED_COUNT">.</span>
        </td>
      </tr>
    </table>
  </tal:block>
</metal:macro>
<metal:macro metal:define-macro="orphanedcrewlocations">
  <tal:block tal:condition="not:ERROR">
    <table class="tcal" tal:condition="PODS">
      <tr>
        <th>Crew-Anzahl</th>
        <th>Koordinaten</th>
      </tr>
      <tr tal:repeat="pod PODS">
        <td>
          <span tal:content="pod/getCrewCount">CREWCOUNT</span>
        </td>
        <td>
          <span tal:content="pod/getSectorString">COORDS</span>
        </td>
      </tr>
    </table>
    <table class="tcal" tal:condition="TRADEPOSTS">
      <tr>
        <th>Crew-Anzahl</th>
        <th>Koordinaten</th>
        <th>Handelsposten</th>
      </tr>
      <tr tal:repeat="post TRADEPOSTS">
        <td>
          <span tal:content="post/amount">CREWCOUNT</span>
        </td>
        <td>(<span tal:content="post/sector">COORDS</span>)
        </td>
        <td>
          <span tal:content="structure bbcode:post/name">NAME</span>
        </td>
      </tr>
    </table>
  </tal:block>
</metal:macro>
<metal:macro metal:define-macro="shuttlemanagement">
  <form action="colony.php" method="post" tal:define="SHIP WRAPPER/get">
    <input type="hidden" name="id" tal:attributes="value COLONY/getId" />
    <input type="hidden" name="sid" tal:attributes="value SHIP/getId" />
    <input type="hidden" name="sstr" tal:attributes="value THIS/getSessionString" />
    <tal:block tal:condition="not:ERROR">
      <table class="tcal" tal:condition="AVAILABLE_SHUTTLES">
        <tr>
          <th>Shuttle-Typ</th>
          <th colspan="3">Menge</th>
        </tr>
        <tr tal:repeat="data AVAILABLE_SHUTTLES">
          <td>
            <img src="assets/commodities/${data/getCommodityId}.png" title="${data/getCommodityName}" />
          </td>
          <td>
            <a tal:condition="WRAPPER/isOwnedByCurrentUser" href="javascript:void(0);"
              onclick="decreaseShuttleAmount(${data/getCommodityId});">
              <img src="assets/buttons/b_down1.png" title="Anzahl senken" /></a>
          </td>
          <td>
            <input type="hidden" name="shuttles[]" tal:attributes="value data/getCommodityId" />
            <input readonly="readonly" type="text" id="shuttleAmount_${data/getCommodityId}"
              tal:attributes="value data/getCurrentLoad" name="shuttlecount[${data/getCommodityId}]" size="2" />
          </td>
          <td>
            <a href="javascript:void(0);"
              onclick="increaseShuttleAmount(${data/getCommodityId}, ${data/getMaxUnits}, ${SHIP/getRump/getShuttleSlots});">
              <img src="assets/buttons/b_up1.png" title="Anzahl erhöhen" /></a>
          </td>
        </tr>
        <tr>
          <td colspan="2"></td>
          <td>
            <span>Summe:</span>
          </td>
          <td>
            <span id="storedshuttles" tal:content="CURRENTLY_STORED">SUM</span>/<span
              tal:replace="SHIP/getRump/getShuttleSlots"></span>
          </td>
        </tr>
      </table>
      <input type="submit" style="cursor: pointer;" name="B_MANAGE_SHUTTLES" value="Transfer starten" />
    </tal:block>
  </form>
</metal:macro>
<metal:block metal:define-macro="colonyeps">
  <input type="hidden" name="sstr" id="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
  <div class="box">
    <div class="box_title" tal:content="COLONY_SURFACE/getEpsBoxTitleString">TITLE</div>
    <div class="box_body">
      <img src="/assets/buttons/e_trans2.png" title="Energie" style="width: 12px; height: 12px;" /> <span
        tal:repeat="bar EPS_STATUS_BAR" tal:content="structure bar">BAR</span>
      ${addPlusCharacter:COLONY_SURFACE/getEnergyProduction}
    </div>
  </div>
</metal:block>
<metal:block metal:define-macro="colonyshields">
  <input type="hidden" name="sstr" id="sstr" value="runtime" tal:attributes="value THIS/getSessionString" />
  <div class="box">
    <div class="box_title" tal:content="COLONY_SURFACE/getShieldBoxTitleString">TITLE</div>
    <div class="box_body">
      <img src="/assets/buttons/shld.png" title="Schildstärke" style="width: 12px; height: 12px;" /> <span
        tal:repeat="bar SHIELD_STATUS_BAR" tal:content="structure bar">BAR</span>
    </div>
  </div>
</metal:block>
<metal:block metal:define-macro="colonystorage">
  <table class="use" style="width: 433px;">
    <tr>
      <th>
        <span>Lager:</span> ${COLONY/getStorageSum}/${COLONY/getMaxStorage}
        (<span tal:replace="COLONY_SURFACE/getStorageSumPercent">PERCENT</span>%)
      </th>
      <td>
        <span tal:content="structure formatProductionValue:PRODUCTION_SUM">SUM</span>
      </td>
    </tr>
    <tr tal:attributes="class string:row${repeat/stor/odd}" tal:repeat="stor STORAGE">
      <td style="vertical-align: middle;">
        <div style="display: table-cell; width: 55px;">
          <a href="javascript:void(0);" onclick="getCommodityLocations(${stor/commodity/getId})">
            <img src="assets/commodities/${stor/commodity/getId}.png" tal:attributes="title stor/commodity/getName" />
          </a>
        </div>
        <div style="display: table-cell; width: 40px; vertical-align:middle;">
          <span tal:condition="stor/storage" tal:replace="stor/storage/getAmount">.</span>
          <span tal:condition="not:stor/storage" tal:replace="string:0">.</span>
        </div>
        <div style="display: table-cell; vertical-align: middle" tal:content="stor/commodity/getName">NAME</div>
      </td>
      <td style="vertical-align: middle;">
        <span tal:condition="not:stor/production">-</span>
        <span tal:condition="stor/production" tal:content="stor/production/getProductionDisplay"
          tal:attributes="class stor/production/getCssClass">.</span>
      </td>
    </tr>
  </table>
</metal:block>
<metal:macro metal:define-macro="module_select_tab">
  <td id="module_tab_${moduleType}" tal:define="tab MODULE_SCREEN_TABS/${moduleType}"
    tal:attributes="class tab/getCssClass" onclick="showModuleSelectTab(this,${moduleType});">
    <img src="assets/buttons/modul_screen_${moduleType}.png" tal:condition="not:tab/hasSelectedModule"
      id="tab_image_mod_${moduleType}" />
    <tal:block tal:condition="tab/hasSelectedModule" tal:repeat="mod tab/getSelectedModule">
      <img src="assets/commodities/${mod/getModule/getCommodityId}.png" id="tab_image_mod_${moduleType}" />
    </tal:block>
    <span tal:replace="tab/getTabTitle">DESCRIPTION</span>
    <span tal:condition="tab/isSpecial" id="module_tab_info_${moduleType}">0 von max. ${RUMP/getSpecialSlots}</span>
  </td>
</metal:macro>
<metal:macro metal:define-macro="colonymenu_container">
  <div class="colonymenu_container" onkeydown="return event.key != 'Enter';">
    <form action="colony.php" method="post">
      <metal:macro metal:define-slot="containment" />
    </form>
  </div>
</metal:macro>
<metal:macro metal:define-macro="colonymenu_sub_container">
  <div>
    <form action="colony.php" method="post">
      <metal:macro metal:define-slot="containment" />
    </form>
  </div>
</metal:macro>

</html>
