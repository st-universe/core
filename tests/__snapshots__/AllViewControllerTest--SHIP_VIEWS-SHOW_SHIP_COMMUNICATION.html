<html lang="de">

<head>
  <script src="/static/js/default.js"></script>
</head>

<body>
  <div class="ajaxwin">
        <table class="tcal">
      <tr>
        <th onmouseover="switch_drag_on();" onmouseout="switch_drag_off();">Schiffskommunikation</th>
        <th style="width: 18px;">
          <a href="javascript:void(0);" onclick="closeAjaxWindow();" onmouseover="cp('ajaxclose','buttons/x2');" onmouseout="cp('ajaxclose','buttons/x1');">
            <img src="/assets/buttons/x1.png" name="ajaxclose" title="Fenster schlie&Atilde;&#159;en">
          </a>
        </th>
      </tr>
    </table>
        
  <div class="box">
    <div class="box_title">Men&Atilde;&frac14;</div>
    <div class="box_body">
      <table class="tcal">
        <tr>
          <td style="width: 33%" class="selected" id="menubroadcast">
            <a style="display: block;" href="javascript:void(0);" onclick="switchMenuToBroadcast()">Broadcast</a>
          </td>
          <td style="width: 33%" id="menulogbook">
            <a style="display: block;" href="javascript:void(0);" onclick="switchMenuToLogbook()">Logbuch</a>
          </td>
          <td style="width: 33%" id="menuemergency">
            <a style="display: block;" href="javascript:void(0);" onclick="switchMenuToEmergency()">Notruf</a>
          </td>
        </tr>
      </table>
    </div>
  </div>
  <div class="box" id="broadcast" style="width: 500px;">
    <div class="box_title">Broadcast</div>
    <div class="box_body">
      <form method="post" action="ship.php">
        <input type="hidden" name="id" value="42">
        <table class="tcal">
          <tr>
            <th>Sende Broadcast an alle Kolonien und Stationen im Umkreis von einem Feld</th>
          </tr>
          <tr>
            <td><textarea name="text" style="width: 100%; height: 300px;">Die Aerie in Sektor 7|8 sendet folgende Broadcast Nachricht:</textarea></td>
          </tr>
          <tr>
            <td><input type="submit" name="B_SEND_BROADCAST" class="button" value="Broadcast senden"></td>
          </tr>
        </table>
      </form>
    </div>
  </div>
  <div class="box" id="logbook" style="width: 500px; display: none;">
    <div class="box_title">Logbuch</div>
    <div class="box_body">
      <form method="post" action="ship.php">
        <input type="hidden" name="id" value="42">
        <div id="writelog" style="display: none;">
          <table class="tcal">
            <tr>
              <th colspan="2">Kommentar schreiben</th>
            </tr>
            <tr>
              <td colspan="2">
                <textarea style="width: 100%; height: 100px;" name="log"></textarea>
              </td>
            </tr>
            <tr>
              <td colspan="2" style="text-align: right;">
                <input type="submit" class="button" name="B_ADD_SHIP_LOG" value="Eintrag erstellen">
              </td>
            </tr>
          </table>
        </div>
        <div style="width: 100%; text-align: right;">
          <input type="button" class="button" value="Logeintrag schreiben" onclick="Element.hide(this.parentNode);Element.show($('writelog'))">
        </div>
        <br>
                      </form>
    </div>
  </div>
  <div class="box" id="emergency" style="width: 500px; display: none;">
    <div class="box_title">Notruf</div>
    <div class="box_body">
      <form method="post" action="ship.php">
        <input type="hidden" name="id" value="42">
        <table class="tcal">
          <tr>
            <th colspan="2">Sende Notrufsignal</th>
          </tr>
          <tr>
            <td colspan="2"><textarea id="emergencytext" name="text" style="width: 100%; height: 300px;"></textarea></td>
          </tr>
          <tr>
            <td style="width: 200px">
              <span id="emergencyTextLength">0</span>/<span>250</span> Zeichen
            </td>
            <td><input id="startEmergencyButton" type="submit" name="B_START_EMERGENCY" class="button" value="Notruf senden"></td>
          </tr>
        </table>
        <table class="tcal" style="display: none;">
          <tr>
            <th>Aktuelles Notrufsignal</th>
          </tr>
          <tr>
            <td></td>
          </tr>
          <tr>
            <td><input type="submit" name="B_STOP_EMERGENCY" class="button" value="Notruf beenden"></td>
          </tr>
        </table>
      </form>
    </div>
  </div>
  <script>
    document.getElementById('emergencytext').addEventListener(
      "keyup",
      function () {
        var limit = 250;
        var length = this.value.length;
        document.getElementById('emergencyTextLength').innerHTML = length;
        if (length > limit) {
          document.getElementById('emergencyTextLength').classList.add('error');
          document.getElementById('startEmergencyButton').disabled = true;
        } else {
          document.getElementById('emergencyTextLength').classList.remove('error');
          document.getElementById('startEmergencyButton').disabled = false;
        }
      },
      false
    );
  </script>
      </div>
  </body>

</html>
